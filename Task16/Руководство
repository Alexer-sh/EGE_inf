Тут всё максимально просто. Банально пишем рекурсию и радуемся жизни, в особо тяжёлых случаях (статград) кастуем:
from sys import *
setrecursionlimit(100000)
