Тупо считаем колво рёбер у вершин и делаем логические умозаключения.
Всё.